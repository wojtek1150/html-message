!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("html-message",["exports","@angular/core","@angular/common","@angular/platform-browser"],t):t((e=e||self)["html-message"]={},e.ng.core,e.ng.common,e.ng.platformBrowser)}(this,(function(e,t,n,r){"use strict";var a=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-html-message",template:'\n    <div class="message" [innerHtml]="message | htmlParser | safeHtml"></div>\n  ',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:[".message{display:block;line-height:1.25}.message .align-right{text-align:right}.message .align-center{text-align:center}.message ol,.message ul{line-height:1.4;-webkit-margin-after:1em;margin-block-end:1em;-webkit-margin-before:1em;margin-block-start:1em;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-start:0;margin-inline-start:0;-webkit-padding-start:40px;padding-inline-start:40px}.message p{white-space:normal}.message table{margin-top:15px;width:100%}.message h2,.message td,.message th,.message tr{padding:12px 20px}.message h2{color:#404040;font-size:20px;font-weight:500;padding:20px 20px 5px}.message th{color:#757575;font-size:12px;font-weight:500}.message td{border-collapse:collapse;border-top:1px solid #d8d8d8;color:#292929;font-size:13px;font-weight:400;text-align:center}.message a{color:#2980b9;text-decoration:none;-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out}.message a:hover{color:#55a5d9}.message tr:not(#header){-webkit-transition:.2s ease-in-out;transition:.2s ease-in-out}.message tr:not(#header):hover{background:#eee}"]}]}],e.propDecorators={message:[{type:t.Input}]},e}();var s=function(){function e(){this.length=100}return e.decorators=[{type:t.Component,args:[{selector:"lib-html-message-preview",template:"\n    <p>{{message | htmlPreview:length}}</p>\n  ",changeDetection:t.ChangeDetectionStrategy.OnPush}]}],e.propDecorators={message:[{type:t.Input}],length:[{type:t.Input}]},e}();var i=new RegExp("([cid:[^s]+])<([^>]+)><([^>]+)>","gmi"),o=new RegExp("(\\[cid:[^\\s]+])\\s+<([^>]+)><([^>]+)>","gmi"),l=new RegExp("([^\\s<]+)<([^>]+)>","gmi"),p=new RegExp("^(\\s)*"),g=new RegExp("(\\s)*$"),m=new RegExp("\\n","g"),c=new RegExp('(<img.*">)',"gmi"),u=new RegExp("(_{32}.From.*)","gmi"),d=function(){function e(){}return e.removeCid=function(e){return e.replace(i,"").replace(o,"")},e.parseLinks=function(e){return e.replace(l,(function(e,t,n){return e?'<a href="'+n+'" target="_blank" rel="nofollow">'+t+"</a>":""}))},e.trim=function(e){return e.replace(p,"").replace(g,"")},e.parseHtml=function(e){return e.replace("<html><body>","").replace("</body></html>","").replace('style="text-align:right;"','class="align-right"').replace('style="text-align:center;"','class="align-center"').replace(c,"").replace(u,"")},e.parse=function(e){return e?e.includes("[cid:")?this.trim(this.parseLinks(this.removeCid(e))).replace(m,"<br/>"):this.parseHtml(e):""},e}(),f=function(){function e(){}return e.prototype.transform=function(e){return d.parse(e)},e.decorators=[{type:t.Pipe,args:[{name:"htmlParser"}]}],e}(),h=function(){function e(){}return e.prototype.transform=function(e,t){return e.replace(u,"").replace(/<[^>]*>?/gm,"").replace("&nbsp;"," ").substr(0,-1===t?1/0:t)},e.decorators=[{type:t.Pipe,args:[{name:"htmlPreview"}]}],e}(),w=function(){function e(e){this.sanitized=e}return e.prototype.transform=function(e){return this.sanitized.bypassSecurityTrustHtml(e)},e.decorators=[{type:t.Pipe,args:[{name:"safeHtml"}]}],e.ctorParameters=function(){return[{type:r.DomSanitizer}]},e}();var x=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[a,s,f,h,w],imports:[n.CommonModule],exports:[a,s]}]}],e}();e.HtmlMessageComponent=a,e.HtmlMessageModule=x,e.HtmlParserPipe=f,e.HtmlParserService=d,e.HtmlPreviewMessageComponent=s,e.HtmlPreviewPipe=h,e.REG_IMAGES=c,e.REG_OUTLOCK=u,e.SafeHtmlPipe=w,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=html-message.umd.min.js.map